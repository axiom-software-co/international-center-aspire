import{d as C,c as v,h as a,a as o,Y as D,b as w,n as k,w as A,t as g,e as m,f as B,o as b,g as z}from"./vue.runtime.esm-bundler.HDkGvW5c.js";import{B as T,I as U}from"./Input.Bp_f9Ih5.js";import{c as P}from"./utils.CPYLdFy8.js";import{newsletterClient as Z}from"./index.BGfG_Yek.js";import{_ as N}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{v as R}from"./runtime-dom.esm-bundler.E0ccDF80.js";import"./index.C8Qsmln1.js";import"./environments.BVEfl2St.js";const I=C({__name:"UnifiedContentCTA",setup(E,{expose:i}){i();const l=m(""),e=m("idle"),r=m(""),n=m(!1),t=m(""),p=m(""),c=d=>{const s=d.trim();if(!s)return{isValid:!1,message:""};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return{isValid:!1,message:"Please enter a valid email format"};if(!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(s))return{isValid:!1,message:"Please enter a valid email address"};const u=[{pattern:/@gmial\./,suggestion:"Did you mean @gmail.com?"},{pattern:/@gmai\./,suggestion:"Did you mean @gmail.com?"},{pattern:/@yahooo\./,suggestion:"Did you mean @yahoo.com?"},{pattern:/@yaho\./,suggestion:"Did you mean @yahoo.com?"},{pattern:/@outlok\./,suggestion:"Did you mean @outlook.com?"},{pattern:/@hotmial\./,suggestion:"Did you mean @hotmail.com?"}];for(const _ of u)if(_.pattern.test(s))return{isValid:!1,message:_.suggestion};if(s.length<5)return{isValid:!1,message:"Email address is too short"};if(s.length>254)return{isValid:!1,message:"Email address is too long"};const[S]=s.split("@");return S.length>64?{isValid:!1,message:"Email username is too long"}:/\.{2,}/.test(s)?{isValid:!1,message:"Email cannot contain consecutive dots"}:s.startsWith(".")||s.endsWith(".")?{isValid:!1,message:"Email cannot start or end with a dot"}:{isValid:!0,message:"Valid email address"}},V=()=>{if(n.value=!0,!l.value.trim()){t.value="Email address is required";return}const d=c(l.value);d.isValid?t.value="":t.value=d.message},x=()=>{n.value&&t.value&&c(l.value).isValid&&(t.value=""),e.value==="error"&&(e.value="idle",r.value="")};B(l,x);const y={email:l,status:e,message:r,touched:n,validationError:t,honeypot:p,validateEmail:c,handleEmailBlur:V,handleEmailChange:x,handleSubmit:async d=>{d.preventDefault();const s=l.value.trim();if(!s){n.value=!0,t.value="Email address is required";return}const h=c(s);if(!h.isValid){n.value=!0,t.value=h.message;return}e.value="loading",t.value="";try{if(p.value.trim()!==""){e.value="error",r.value="Submission blocked. Please try again.";return}const f={email:s,source:"website_newsletter_signup",contentType:"all"},u=await Z.subscribe(f);u.success?(e.value="success",r.value=u.message||"Successfully subscribed to updates!"):(e.value="error",r.value=u.message||"Unable to subscribe at the moment. Please try again later."),u.success&&(l.value="",n.value=!1,t.value="",setTimeout(()=>{e.value="idle",r.value=""},5e3))}catch(f){console.error("Newsletter subscription error:",f),e.value="error",r.value="Unable to subscribe at the moment. Please try again later."}},Input:U,Button:T,get cn(){return P}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),j={class:"pt-0 pb-0"},W={class:"relative overflow-hidden bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800"},q={class:"container mx-auto px-4"},H={class:"relative p-8 md:p-10 lg:p-12"},M={class:"flex flex-col lg:flex-row items-center gap-6 lg:gap-8"},F={class:"flex flex-col sm:flex-row gap-3"},G={key:0,class:"mt-2"},O={class:"text-sm text-red-300"},Y={key:1,class:"mt-2"},J={class:"text-sm text-green-300"},K={key:2,class:"mt-2"},L={class:"text-sm text-red-300"};function Q(E,i,l,e,r,n){return b(),v("section",j,[a("div",W,[a("div",q,[a("div",H,[a("div",M,[o(" Content "),i[2]||(i[2]=a("div",{class:"flex-1 text-center lg:text-left space-y-3"},[a("h3",{class:"text-xl md:text-2xl font-semibold text-white"},"Stay Updated with News, Research & Events")],-1)),o(" Form "),a("form",{onSubmit:e.handleSubmit,class:"w-full max-w-md relative"},[o(" Honeypot field - hidden from users but visible to bots "),D(a("input",{type:"text",name:"website","onUpdate:modelValue":i[0]||(i[0]=t=>e.honeypot=t),style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",opacity:"0","pointer-events":"none"},tabindex:"-1","aria-hidden":"true"},null,512),[[R,e.honeypot]]),o(" Input and Button Row "),a("div",F,[w(e.Input,{type:"email",modelValue:e.email,"onUpdate:modelValue":i[1]||(i[1]=t=>e.email=t),onBlur:e.handleEmailBlur,placeholder:"Enter your email address",class:k(e.cn("flex-1 h-auto px-3 py-2 bg-white/10 text-white placeholder:text-white/60 focus:bg-white/20 border-white/20 focus:border-white/40 transition-all duration-200 rounded-sm border",e.touched&&e.validationError&&"border-red-500 focus:border-red-500")),disabled:e.status==="loading"||e.status==="success",autocomplete:"email","aria-invalid":e.touched&&!!e.validationError},null,8,["modelValue","class","disabled","aria-invalid"]),w(e.Button,{type:"submit",disabled:e.status==="loading"||e.status==="success",class:"bg-white text-blue-600 hover:bg-gray-100 font-semibold px-6 py-2 rounded-sm border border-white hover:border-gray-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors"},{default:A(()=>[z(g(e.status==="loading"?"Subscribing...":e.status==="success"?"Subscribed!":"Subscribe"),1)]),_:1},8,["disabled"])]),o(" Status Messages "),e.touched&&e.validationError?(b(),v("div",G,[a("p",O,g(e.validationError),1)])):o("v-if",!0),e.status==="success"&&e.message?(b(),v("div",Y,[a("p",J,g(e.message),1)])):o("v-if",!0),e.status==="error"&&e.message?(b(),v("div",K,[a("p",L,g(e.message),1)])):o("v-if",!0)],32)])])]),o(" Decorative Elements "),i[3]||(i[3]=a("div",{class:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-32 -mt-32"},null,-1)),i[4]||(i[4]=a("div",{class:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full blur-2xl -ml-24 -mb-24"},null,-1))])])}const re=N(I,[["render",Q],["__file","/home/tojkuv/Documents/GitHub/international-center/international-center-aspire/website/Website/src/components/UnifiedContentCTA.vue"]]);export{re as default};
